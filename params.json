{
  "name": "SyntheticEEG",
  "tagline": "Synthetic EEG signal generator",
  "body": "# Synthetic EEG\r\n\r\nby Victor Barres (Last updated 2015-03-16)\r\n\r\n*Barrès, V., Simons III, A., & Arbib, M. (2013). Synthetic event-related potentials: A computational bridge between neurolinguistic models and experiments. Neural Networks, 37, 66–92. http://doi.org/10.1016/j.neunet.2012.09.021*\r\n\r\n## Software dependencies.\r\n### FieldTrip\r\n\t\r\nSource: http://fieldtrip.fcdonders.nl/\r\n\r\nFieldTrip provides the Matlab environment for EEG processing.\r\n\r\nIn particular, FieldTrip Matlab functions are used used for:\r\n\t* 3D Mesh display\r\n\t* As an interface with the OpenMEEG C++ implementation of the forward model.\r\n\t\t\r\nFieldtrip folder, found in **external/dependencies/**, must be placed on the Matlab path.\r\n\r\n### OpenMEEG\r\n\r\nSource: http://openmeeg.github.io/\r\n\r\nOpenMEEG must be installed and on the system's path in order to be able to use it to compute the\r\nforward model solution using their BEM algorithm.\r\n\r\nOpenMEEG in **external/OpenMEEG/**(?)\r\n\r\n### SPM\r\n\t\r\nSPM has been used mostly through some of the external packages it provides (such as PickAtlas), but also SyntheticEEG \r\nuses the Colin27MNI head meshes that are provided with SPM in gifti format.\r\nThose are found in 'external/SPM8/gifti/'.\r\n\r\n### PickAtlas\r\n\t\r\nPickatlas based on Talairach daemon and provided by ANSIR laboratory is used to extract the masks for brain regions.\r\nhttp://fmri.wfubmc.edu/software/PickAtlas\r\nSynthetic EEG also uses the wfu_pickatlas matlab function to translate Colin27 bewteen MNI to Cube coordinates.\r\n'external/wfu_pickatlas' folder must be placed on the matlab path.\r\n\r\nOther atlases can be used.\r\nThe synERP package does not provide direct tools to define the masks. We relied on the above packages.\r\n\r\nNOTE: the masks need to be in MNI coordinates.\r\n\r\n\r\n## Data\r\n\r\n### Meshes\r\n\r\nGifti folder provides the meshes associated with Collins20 head model (MNI) in the gifti format.\r\nThe current version of the program works with such meshes given in Cubic space.\r\n\r\nMeshes folder provides the .mat files associated with the .gii in the gifti folder, after transformation\r\nusing gifti_convert.\r\n\r\n### Masks\r\n\t\r\nWe provide a series of masks for brain regions created using wfu pickatlas (see above).\r\nThey are given in MNI space, and therefore need to be converted to Cubic space.'\r\nThe MNI_T1.mat provides the coordinate transformation matrix MNI_Space -> Cubic_Space\r\n\r\n## Install\r\n\r\n**Step1**:\r\n\t\r\n\tUnzip the SyntheticERP folder.\r\n\r\n**Step2**:\r\n\t\r\n\tInstall OpenMEEG. Make sure it's 'bin' folder is on your system path.\r\n\r\n**Step3**:\r\n\r\n\tIn the SyntheticERP folder, add to your Matlab path: 'external/dependencies/fieldtrip-20120307', 'external/arrow', 'external/OpenMEEG'??, 'external/SPM8', 'external/wfu_pickatlas'\r\n\r\n**Step4**:\r\n\r\n\tSet the SyntheticERP folder as your current workspace.\r\n\r\n**Step5**:\r\n\r\n\tYou are ready! Use run.m to load or create a new simulation.\r\n\r\n## Create a new simulation\r\n\r\n**Step1**:\r\n\r\n\tRun 'run.m'\r\n\t\r\n**Step2**:\r\n\r\n\tSelect 'Create new sim'\r\n\t\r\n**Step3**:\r\n\r\n\tEnter a name for your new simulation. Simulations are stored in a folder within the 'simulations' folder.\r\n\t\r\n**Step4**:\r\n\r\n\tSelect 'Select headmesh'. This will create a headmesh for your simulation.\r\n\tIn the current version a single headmesh is available (ColinsMNI).\r\n    \tThis creates the 'meshes.mat' file in your simulation folder.\r\n\t\r\n**Step5**:\r\n\r\n\tSelect 'Choose conductivities'. Pick the conductivities value you want.\r\n    \tThis creates the 'cond.mat' file in your simulation folder.\r\n\t\r\n**Step6**:\r\n\r\n\tSelect 'Select sensors'. Pick the types of sensors you want to use. \r\n        \tTop-head -> all the vertices on the top of the skin mesh will be used as sensor positions\r\n        \tDefault -> Offers default electrodes positions.\r\n        \tRandom -> Randomly picks positions on the skin mesh as sensor positions.\r\n        \tNote: In the current version, only top-head and random can be used to then plot the scalp topography of the leadfield.\r\n    \tThis creates the 'sensors.mat' file in your simulation folder.\r\n\t\r\n**Step7**:\r\n\r\n\tSelect 'Define modules'.\r\n    \tA module represents a set of brain regions.\r\n    \tFor a given simulations, there is no limitation in the number of modules that can be created.\r\n    \tThe brain regions associated with the modules will correspond to the area of the cortex in which electric dipoles sources will be placed.\r\n    \tThis creates the 'slabs.mat' in the simulation folder.\r\n\t\r\n**Step8**:\r\n\r\n\tSelect 'Create dipoles'\r\n    \tThis generates the electric dipole sources associated with the modules\r\n    \tSelect the modules for which you would like to generate dipoles.\r\n    \tYou can either choose to have a single dipole per module or distributed dipoles.\r\n    \tNote: Single dipole should be used with caution...Approximation only valid for brain regions where curvature is negligible.\r\n    \tFor distributed dipoles, based on the density, random vertices in brain regions are chose to position dipoles. A dipole's norm is proportional to the area of the adjacent triangles in the mesh (to check...)\r\n    \tThis creates the 'dipoles.mat' in the simulation folder.\r\n\r\n\r\nAt this point, the simulation folder contains:\r\n- 'meshes.mat'\r\n- 'cond.mat'\r\n- 'sensors.mat'\r\n- 'slabs.mat'\r\n- 'dipoles.mat'\r\n\r\nThe key data required to compute the leadfield are: 'meshes.mat', 'cond.mat', 'sensors.mat', 'dipoles.mat'.\r\nDefining modules is an easy way to position dipoles sources, but any other script generating a 'dipoles.mat' file could be used.\r\n\r\n**Step9**:\r\n\r\n\tSelect 'Create leadfield'.\r\n    \tThis generates the leadfield based on the data contained in\r\n        \t- 'meshes.mat'\r\n        \t- 'cond.mat'\r\n        \t- 'sensors.mat'\r\n        \t- 'dipoles.mat'\r\n    \tIt uses the OpenMEEG C++ BEM implementation combined with the Matlab interface provided by FieldTrip.\r\n    \tThis creates \r\n        \t- the 'cfg.mat' file in the simulation folder that contains the configuration information used by FieldTrip to run the forward model.\r\n        \t- the 'grid.mat' file that contains the output of the BEM forward model.\r\n        \t- the 'leadfield.mat' which contains the leadfield.\r\n        \t- the 'leadFieldDiary.txt' that contains details on the computation.\r\n\r\nWhat is missing is the dipole amplitudes dA(t).\r\nThis could be provided directly by the user (NOTE: WRITE FUNCTION TO MAKE THIS EASY!!!)\r\n\r\nThe model in its current form allows for the simulation of forward activation of modules (see SyntheticERP paper).\r\n- 'Create circuit' -> Allows the user to build a feedforward brain circuit of modules.\r\n- 'Create forward activation values' -> Allows the user, based on the circuit, to define a rudimentary feedforward activation flow pattern.\r\n- 'Create IRF' -> Allows the user to create a impulse response function.\r\n- 'Create boxcar timecourse' -> Uses the feedforward activation flow pattern in modules to generate boxcar dA_boxcar(t) for each dipole.\r\n- 'Create waveform timecourse' -> Computes the convolution dA_boxcar(t)*IRF to generate dipoles final waveform amplitudes timcourses dA(t).\r\n\r\n\r\nOne the leadfield and the dA(t) are available, the final EEG signal can be computed simply by multiplying the leadfield matrix with dA(t).\r\n\r\n**Step 10**:\r\n\r\n\tTo create EEG signal from leadfield + dA(t) information, used 'Create EEG data for an electrode'.\r\n    \tThis requires that a default sensors position has been chosen.\r\n\tNOTE: SCRIPT EASY TO MODIFY TO GET THE EEG DATA IN GENERAL! TO DO!\r\n    \r\n\r\n## More about run()\r\n\r\n- A new simulation can be created or an old one loaded. Once a simulation loaded, any of the previous steps can be re-run to modify the simulation.\r\n- Once a simulation is loaded, all the display option allow the user to visualize the information contained in the simulatoin folder.\r\n- The run module also allows the user to visualize the meshes, conductivity data, electrode options, atlases, as well as some ERP data.\r\n\r\n## Scripts\r\n\r\nTO BE DONE! (Old...)\r\n\r\n**gifti_convert.m**\r\n\r\n\tThis function converts a gifti structure into a triangle mesh structure\r\n\tOpenMEEG friendly!!\r\n\tA triangle mesh, for OpenMEEG, requires to give the normal of the vertices which is\r\n\tdefined as the averaged normal of that faces it participates in the\r\n\tvertex. The gifti() function from FieldTrip does not return the normals.\r\n\r\n\tNOTE: The FieldTrip implementation of OpenMEEG does not require the normals and\r\n\ttherefore, the gifti() function would be enough. A Cpp or Python implementation of OpenMEEG\r\n\trequires such conversion. I kept the function so that the core program only works on direct\r\n\tMatlab readable formats.\r\n\r\n\r\n**createMesh.m**\r\n\r\n\tInput = gifti_mesh_name (no extension)\r\n\tConverts a gifti format into a matlab structure.\r\n\t\tIf the structure already exists:\r\n\t\t\tIt displays the gifti mesh.\r\n\t\tIf the structure does not exists:\r\n\t\t\tThe mesh is created and the gifti is displayed.\r\n\r\n\tUses gifti.m from FieldTrip\r\n\tUses a plot(mesh.gii) function from FieldTrip (better quality plot)\r\n\r\n\t\r\n\r\n**getDipoles.m**\r\n\r\n\tInput = (brain_mesh,mask)\r\n\tThis function returns the positions and orientations of dipoles for a given\r\n\tslab.\r\n\tSlabs are defined as .nii masks in cube coordinates from wfu_pickatlas.\r\n\tMesh should be given as the output of the CreateMesh.m script\r\n\r\n**forwardModel.m**\r\n\r\n\tDoes everything else!!!\r\n\tNeeds to be refactored!\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}